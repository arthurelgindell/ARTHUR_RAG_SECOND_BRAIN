[{"updatedAt":"2026-01-14T02:49:08.164Z","createdAt":"2026-01-14T02:16:43.427Z","id":"I01VLCz9d5gLdqSn","name":"AI Daily Briefing","description":null,"active":true,"isArchived":false,"nodes":[{"parameters":{"httpMethod":"GET","path":"briefing","authentication":"headerAuth","responseMode":"responseNode","options":{}},"id":"webhook-trigger","name":"Webhook","type":"n8n-nodes-base.webhook","typeVersion":2,"position":[250,300],"webhookId":"briefing","credentials":{"httpHeaderAuth":{"id":"6190621fcc051461","name":"Webhook API Key"}}},{"parameters":{"jsCode":"const now = new Date();\nconst timezone = 'America/Los_Angeles';\n\nreturn [{\n  json: {\n    requestTime: now.toISOString(),\n    date: now.toLocaleDateString('en-US', {\n      timeZone: timezone,\n      weekday: 'long',\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    }),\n    timezone\n  }\n}];"},"id":"init-briefing","name":"Initialize","type":"n8n-nodes-base.code","typeVersion":2,"position":[450,300]},{"parameters":{"operation":"getAll","returnAll":false,"limit":20,"filters":{"q":"is:unread","includeSpamTrash":false},"options":{}},"id":"gmail-unread","name":"Gmail Unread","type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[650,300],"onError":"continueErrorOutput","credentials":{"gmailOAuth2":{"id":"7g2mqiKshJ33stiG","name":"Gmail account"}}},{"parameters":{"operation":"getAll","returnAll":true,"calendar":"primary","options":{"singleEvents":true,"timeMin":"={{ $('Initialize').first().json.requestTime }}","timeMax":"={{ new Date(Date.now() + 24*60*60*1000).toISOString() }}","orderBy":"startTime"}},"id":"calendar-today","name":"Calendar Today","type":"n8n-nodes-base.googleCalendar","typeVersion":1.2,"position":[850,300],"onError":"continueErrorOutput","credentials":{"googleCalendarOAuth2Api":{"id":"aS0fUlg6K3GiQib1","name":"Google Calendar account"}}},{"parameters":{"jsCode":"const initData = $('Initialize').first().json;\nconst gmailItems = $('Gmail Unread').all();\nconst calendarItems = $('Calendar Today').all();\n\nconst emails = gmailItems.map(item => {\n  const email = item.json;\n  return {\n    subject: email.subject || '(No Subject)',\n    from: email.from?.value?.[0]?.address || email.from || 'Unknown',\n    snippet: (email.snippet || '').substring(0, 100),\n    date: email.date\n  };\n}).slice(0, 10);\n\nconst events = calendarItems.map(item => {\n  const event = item.json;\n  const start = event.start?.dateTime || event.start?.date;\n  return {\n    summary: event.summary || '(No Title)',\n    start: start,\n    location: event.location || '',\n    isAllDay: !event.start?.dateTime\n  };\n});\n\nreturn [{\n  json: {\n    context: initData,\n    unreadEmails: emails,\n    unreadCount: emails.length,\n    todayEvents: events,\n    eventCount: events.length\n  }\n}];"},"id":"aggregate-data","name":"Aggregate Data","type":"n8n-nodes-base.code","typeVersion":2,"position":[1050,300]},{"parameters":{"jsCode":"const data = $input.first().json;\n\nlet prompt = `You are a helpful executive assistant providing a morning briefing. Today is ${data.context.date}.\n\n## Unread Emails (${data.unreadCount} total)\n`;\n\nif (data.unreadEmails.length === 0) {\n  prompt += \"No unread emails - inbox is clear!\\n\";\n} else {\n  data.unreadEmails.forEach((email, i) => {\n    prompt += `${i+1}. From: ${email.from}\\n   Subject: ${email.subject}\\n   Preview: ${email.snippet}...\\n\\n`;\n  });\n}\n\nprompt += `\\n## Today's Calendar (${data.eventCount} events)\\n`;\n\nif (data.todayEvents.length === 0) {\n  prompt += \"No events scheduled - calendar is open!\\n\";\n} else {\n  data.todayEvents.forEach((event, i) => {\n    const time = event.isAllDay ? 'All Day' : new Date(event.start).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });\n    prompt += `${i+1}. ${time}: ${event.summary}${event.location ? ' @ ' + event.location : ''}\\n`;\n  });\n}\n\nprompt += `\\n---\\n\\nPlease provide:\\n1. A brief summary of my day ahead (2-3 sentences)\\n2. Key priorities based on emails and meetings\\n3. Any potential scheduling conflicts or concerns\\n4. One actionable suggestion for productivity\\n\\nKeep your response concise and actionable.`;\n\nreturn [{\n  json: {\n    prompt,\n    rawData: data\n  }\n}];"},"id":"build-prompt","name":"Build Prompt","type":"n8n-nodes-base.code","typeVersion":2,"position":[1250,300]},{"parameters":{"method":"POST","url":"https://openrouter.ai/api/v1/chat/completions","authentication":"predefinedCredentialType","nodeCredentialType":"httpHeaderAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"},{"name":"HTTP-Referer","value":"http://localhost:5678"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={{ JSON.stringify({ model: 'anthropic/claude-3.5-haiku', max_tokens: 1024, messages: [{ role: 'user', content: $json.prompt }] }) }}","options":{"timeout":30000}},"id":"openrouter-api","name":"OpenRouter API","type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1450,300],"onError":"continueErrorOutput","credentials":{"httpHeaderAuth":{"id":"ab21ae1595524265","name":"OpenRouter API"}}},{"parameters":{"jsCode":"const promptData = $('Build Prompt').first().json;\nconst apiResponse = $input.first().json;\n\nlet analysis = '';\nif (apiResponse.error) {\n  analysis = 'AI analysis unavailable: ' + JSON.stringify(apiResponse.error);\n} else {\n  analysis = apiResponse.choices?.[0]?.message?.content || 'No analysis generated.';\n}\n\nreturn [{\n  json: {\n    success: true,\n    date: promptData.rawData.context.date,\n    summary: {\n      unreadEmails: promptData.rawData.unreadCount,\n      todayEvents: promptData.rawData.eventCount\n    },\n    analysis: analysis,\n    rawData: {\n      emails: promptData.rawData.unreadEmails,\n      events: promptData.rawData.todayEvents\n    },\n    timestamp: new Date().toISOString()\n  }\n}];"},"id":"format-response","name":"Format Response","type":"n8n-nodes-base.code","typeVersion":2,"position":[1650,300]},{"parameters":{"respondWith":"json","responseBody":"={{ $json }}","options":{}},"id":"respond-webhook","name":"Respond","type":"n8n-nodes-base.respondToWebhook","typeVersion":1.1,"position":[1850,300]}],"connections":{"Webhook":{"main":[[{"node":"Initialize","type":"main","index":0}]]},"Initialize":{"main":[[{"node":"Gmail Unread","type":"main","index":0}]]},"Gmail Unread":{"main":[[{"node":"Calendar Today","type":"main","index":0}],[{"node":"Calendar Today","type":"main","index":0}]]},"Calendar Today":{"main":[[{"node":"Aggregate Data","type":"main","index":0}],[{"node":"Aggregate Data","type":"main","index":0}]]},"Aggregate Data":{"main":[[{"node":"Build Prompt","type":"main","index":0}]]},"Build Prompt":{"main":[[{"node":"OpenRouter API","type":"main","index":0}]]},"OpenRouter API":{"main":[[{"node":"Format Response","type":"main","index":0}],[{"node":"Format Response","type":"main","index":0}]]},"Format Response":{"main":[[{"node":"Respond","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"d2e4d3a9-2378-4464-9aad-a73356e25796","activeVersionId":"d2e4d3a9-2378-4464-9aad-a73356e25796","versionCounter":26,"triggerCount":1,"tags":[{"updatedAt":"2026-01-14T02:16:43.427Z","createdAt":"2026-01-14T02:16:43.427Z","id":"is0sB1df02nbjHQS","name":"ai"},{"updatedAt":"2026-01-14T02:16:43.427Z","createdAt":"2026-01-14T02:16:43.427Z","id":"K04fdHhysgZoxVDP","name":"briefing"},{"updatedAt":"2026-01-14T02:16:43.427Z","createdAt":"2026-01-14T02:16:43.427Z","id":"Eay0pyyDmUdDViLY","name":"daily"}],"shared":[{"updatedAt":"2026-01-14T02:16:43.427Z","createdAt":"2026-01-14T02:16:43.427Z","role":"workflow:owner","workflowId":"I01VLCz9d5gLdqSn","projectId":"n8Sx1cqWdTvS8cbq","project":{"updatedAt":"2026-01-13T21:54:52.904Z","createdAt":"2026-01-13T21:39:28.703Z","id":"n8Sx1cqWdTvS8cbq","name":"Arthur Dell <arthur.dell@dellight.ai>","type":"personal","icon":null,"description":null,"creatorId":"09043c1d-4490-46b7-b777-6c5c7c0a6282"}}]}]